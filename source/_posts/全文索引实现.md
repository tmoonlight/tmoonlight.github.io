---
title: 全文索引实现
date: 2016/1/27 11:36:58
tags:
---


1.解锁用户ctxsys

alter user ctxsys account unlock

  


2.

select * from ecc_csc.cc_sr_request

  


GRANT  ctxapp  TO foo;

GRANT execute ON ctxsys. ctx_cls  TO foo;

GRANT execute ON ctxsys. ctx_ddl  TO foo;

GRANT execute ON ctxsys. ctx_doc  TO foo;

GRANT execute ON ctxsys. ctx_output TO foo;

GRANT execute ON ctxsys. ctx_query TO foo;

GRANT execute ON ctxsys. ctx_report  TO foo;

GRANT execute ON ctxsys. ctx_thes  TO foo;

GRANT execute ON ctxsys. ctx_ulexer TO foo

  


3.指定分词器

BEGIN

ctx_ddl.create_preference ( 'my_lexer', 'chinese_vgram_lexer' );

END;

  


BEGIN

ctx_ddl.create_preference( 'test_store','BASIC_STORAGE' );

end;

  


  


select * from all_users

  


Select pre_name, pre_object from ctx_preferences

  


  


select * from shaotestcdx

  


insert into shaotestcdx values ( 3,'文档,DSDSD,TEST,测试' ,779, '文档试');

insert into shaotestcdx values ( 3,'文档,DSDSD,TEST,测试' ,780, '文档,TEST,测试' );

insert into shaotestcdx values ( 3,'文档,DSDSD,TEST,测试' ,781, 'DSDSD,TEST,测试');

insert into shaotestcdx values ( 3,'文档,DSDSD,TEST,测试' ,780, '文档,TEST,测试' );

insert into shaotestcdx values ( 3,'文档,DSDSD,TEST,测试' ,781, '文档,DSDSD,TEST');

  


 _\--Create index cdx_idx on   shaotestcdx(content)_

 _\--indextype is ctxsys.context parameters_

 _\--( 'filter ctxsys.null_filter section group ctxsys.html_section_group');_

  


 _/*创建索引，指定分词器给索引*/_

CREATE INDEX cdx_idx ON shaotestcdx(mycontent) indextype is ctxsys.context parameters ('lexer my_lexer');

  


 _/*维护以及更新索引*/_

begin

ctx_ddl.sync_index ( 'cdx_idx');

end;

  


drop index cdx_idx;

select * from v$datafile;

  


select * from shaotestcdx where mycontent like '%TEST%'

select * from shaotestcdx where contains(mycontent, 'TEST') > 0

  


 _/*查索引基础表*/_

select * from dr$cdx_idx$I
